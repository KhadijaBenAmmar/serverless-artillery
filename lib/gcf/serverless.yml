service: gcf # NOTE: Don't put the word "google" in here

provider:
  name: google
  runtime: nodejs
  region: ${opt:region, 'us-central1'}
  memorySize: 2048
  credentials: ${opt:gcp-creds-file}
  # read the project_id from the credentials file using the self.provider.credentials
  project: ${file(${self:provider.credentials}):project_id}
plugins:
  - serverless-google-cloudfunctions

# needs more granular excluding in production as only the serverless provider npm
# package should be excluded (and not the whole node_modules directory)
package:
  include:
    - serverless.yml
  exclude:
    - node_modules/**
    - .gitignore
    - .git/**
functions:
  loadGenerator:
      handler: loadGenerator
      timeout: 300s
      events:
        - http: path
      environment:
              AWS_ACCESS_KEY_ID: A
              AWS_SECRET_ACCESS_KEY: B
              AWS_REGION: us-east-1
